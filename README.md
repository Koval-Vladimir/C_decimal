# C_decimal

Реализация собственного типа данных Decimal.

## Цель проекта

В настоящем проекте, по указанным ниже требованиям, реализован тип данных Decimal на языке программирования С, который отсутствует в стандарте языка.

## Описание типа

Тип Decimal представляет десятичные числа в диапазоне от положительных 79,228,162,514,264,337,593,543,950,335 до отрицательных 79,228,162,514,264,337,593,543,950,335. Значение Decimal по умолчанию равно 0. Decimal подходит для финансовых расчетов, которые требуют большого количества значимых целых и дробных цифр и отсутствия ошибок округления. Этот тип не устраняет необходимость округления. Скорее, сводит к минимуму количество ошибок из-за него.

Когда результат деления и умножения передается методу округления, результат не страдает от потери точности.

Decimal число - это значение с плавающей точкой, состоящее из знака, числового значения, где каждая цифра находится в диапазоне от 0 до 9, и коэффициента масштабирования, который указывает положение десятичной точки, разделяющей целые и дробные части числового значения.

Двоичное представление Decimal состоит из 1-разрядного знака, 96-разрядного целого числа и коэффициента масштабирования, используемого для деления 96-разрядного целого числа и указания того, какая его часть является десятичной дробью. Коэффициент масштабирования неявно равен числу 10, возведенному в степень в диапазоне от 0 до 28. Следовательно, двоичное представление Decimal имеет вид ((от -2^96 до 2^96) / 10^(от 0 до 28)), где -(2^96-1) равно минимальному значению, а 2^96-1 равно максимальному значению.

Коэффициент масштабирования также может сохранять любые конечные нули в Decimal. Эти конечные нули не влияют на значение в арифметических операциях или операциях сравнения. 

### Двоичное представление  

Двоичное представление Decimal состоит из 1-разрядного знака, 96-разрядного целого числа и коэффициента масштабирования, используемого для деления целого числа и указания того, какая его часть является десятичной дробью. Коэффициент масштабирования неявно равен числу 10, возведенному в степень в диапазоне от 0 до 28.

Decimal число может быть реализовано в виде четырехэлементного массива 32-разрядных целых чисел со знаком (`int bits[4];`).

`bits[0]`, `bits[1]`, и `bits[2]` содержат младшие, средние и старшие 32 бита 96-разрядного целого числа соответственно.

`bits[3]` содержит коэффициент масштабирования и знак, и состоит из следующих частей:
- Биты от 0 до 15, младшее слово, не используются и должны быть равны нулю;
- Биты с 16 по 23 должны содержать показатель степени от 0 до 28, который указывает степень 10 для разделения целого числа;
- Биты с 24 по 30 не используются и должны быть равны нулю;
- Бит 31 содержит знак; 0 означает положительный, а 1 означает отрицательный.

Битовое представление различает отрицательные и положительные нули. Эти значения могут считаться эквивалентными во всех операциях.

### Обязательная структура типа Decimal:

```c
typedef struct 
{
    int bits[4];
} Decimal;
```

### Арифметические операторы

| Название оператора | Оператор | Функция                                                       | 
| ------------------ |----------|-------------------------------------------------------------- |
| Сложение           |     +    | int add(Decimal value_1, Decimal value_2, Decimal *result)    |
| Вычитание          |     -    | int sub(Decimal value_1, Decimal value_2, Decimal *result)    |
| Умножение          |     *    | int mul(Decimal value_1, Decimal value_2, Decimal *result)    | 
| Деление            |     /    | int divide(Decimal value_1, Decimal value_2, Decimal *result) |

Функции возвращают код ошибки:  
- 0 - OK  
- 1 - число слишком велико или равно бесконечности
- 2 - число слишком мало или равно отрицательной бесконечности
- 3 - деление на 0

*Уточнение про числа, не вмещающиеся в мантиссу:*
- *При получении чисел, не вмещающихся в мантиссу при арифметических операциях, использовать банковское округление (например, 79,228,162,514,264,337,593,543,950,335 - 0.6 = 79,228,162,514,264,337,593,543,950,334)*


### Операторы сравнение

| Название оператора | Оператор  | Функция                                   | 
| ------------------ | --------- | ------------------------------------------|
| Меньше             |    <      | int is_less(Decimal, Decimal)             |
| Меньше или равно   |    <=     | int is_less_or_equal(Decimal, Decimal)    | 
| Больше             |    >      | int is_greater(Decimal, Decimal)          |
| Больше или равно   |    >=     | int is_greater_or_equal(Decimal, Decimal) | 
| Равно              |    ==     | int is_equal(Decimal, Decimal)            |
| Не равно           |    !=     | int is_not_equal(Decimal, Decimal)        |

Возвращаемое значение:
- 0 - FALSE
- 1 - TRUE

### Преобразователи 

| Преобразователь | Функция                                            | 
| --------------- | -------------------------------------------------- |
| Из int          | int from_int_to_decimal(int src, Decimal *dst)     |
| Из float        | int from_float_to_decimal(float src, Decimal *dst) |
| В int           | int from_decimal_to_int(Decimal src, int *dst)     |
| В float         | int from_decimal_to_float(Decimal src, float *dst) |

Возвращаемое значение - код ошибки:
 - 0 - OK
 - 1 - ошибка конвертации

*Уточнение про преобразование числа типа float:*
- *Если числа слишком малы (0 < |x| < 1e-28), вернуть ошибку и значение, равное 0*
- *Если числа слишком велики (|x| > 79,228,162,514,264,337,593,543,950,335) или равны бесконечности, вернуть ошибку*
- *При обработке числа с типом float преобразовывать все содержащиеся в нём значимые десятичные цифры. Если таких цифр больше 7, то значение числа округляется к ближайшему, у которого не больше 7 значимых цифр.*

*Уточнение про преобразование из числа типа decimal в тип int:*
- *Если в числе типа decimal есть дробная часть, то её следует отбросить (например, 0.9 преобразуется 0)*


### Другие функции

| Описание                                                     |Функция                                          | 
| -------------------------------------------------------------|-------------------------------------------------|
| 1.Округляет указанное Decimal число до ближайшего целого     |                                                 |
| числа в сторону отрицательной бесконечности.                 | 1. int my_floor(Decimal value, Decimal *result) |	
| 2.Округляет Decimal до ближайшего целого числа.              | 2. int my_round(Decimal value, Decimal *result) |
| 3.Возвращает целые цифры указанного Decimal числа;           |                                                 |
| любые дробные цифры отбрасываются, включая конечные нули.    | 3. int truncate(Decimal value, Decimal *result) |
| 4.Возвращает результат умножения указанного Decimal на -1.   | 4. int negate(Decimal value, Decimal *result)   |

Возвращаемое значение - код ошибки:
 - 0 - OK
 - 1 - ошибка вычисления

## Дополнительные требования

- Библиотека должна быть разработана на языке С стандарта C11 с использованием компиятора gcc;
- Нельзя использовать устаревшие и выведенные из употребления конструкции языка и библиотечные функции. Необходимо ориентироваться на стандарт POSIX.1-2017;
- Исходный код должен соответствовать принципам структурного программирования;
- Запрещено использование типа __int128;
- Конечные нули можно как оставлять, так и удалять (за исключением функции `truncate`);
- Определяемый тип должен поддерживать числа от -79,228,162,514,264,337,593,543,950,335 до +79,228,162,514,264,337,593,543,950,335.
